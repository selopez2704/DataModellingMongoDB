// colletions modifications without dropping it
use("platzi_store")
db.getCollectionInfos()

db.runCommand(
    {
        collMod:'users',
        validator:{
        $jsonSchema:{
            bsonType:'object',
            required:['email','password','role'],
            additionalProperties:true, // edited
            properties:{
                name:{
                    bsonType:'string'
                },
                last_name:{
                    bsonType:'string'
                },
                email:{
                    bsonType:'string',
                    pattern:"[a-z0-9]+@[a-z]+\.[a-z]{2,3}"
                },
                password:{
                    bsonType:'string',
                    pattern:"^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$"
                },
                age:{
                    bsonType:'number',
                    minimum:18,
                    maximum:99
                },
                isSingle:{
                    bsonType:'bool'
                },
                role:{
                    enum:['costumer','seller','admin']
                }
            }
        }
    }
    }
)